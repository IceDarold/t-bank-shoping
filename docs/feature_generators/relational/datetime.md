–ö–æ–Ω–µ—á–Ω–æ! –í–æ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–π README-—Ñ–∞–π–ª –¥–ª—è –º–æ–¥—É–ª—è `datetime.py`, –∫–æ—Ç–æ—Ä—ã–π –æ–±—ä—è—Å–Ω—è–µ—Ç, –∫–∞–∫–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–∏.

---

# README: –ú–æ–¥—É–ª—å –ì–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ü—Ä–∏–∑–Ω–∞–∫–æ–≤ - –†–∞–±–æ—Ç–∞ —Å –î–∞—Ç–æ–π –∏ –í—Ä–µ–º–µ–Ω–µ–º (`datetime.py`)

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ü–µ–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏–∑ –∫–æ–ª–æ–Ω–æ–∫, —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö –¥–∞—Ç—É –∏/–∏–ª–∏ –≤—Ä–µ–º—è.

## 1. üéØ –§–∏–ª–æ—Å–æ—Ñ–∏—è –∏ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–ü—Ä–∏–∑–Ω–∞–∫–∏, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞ –≤—Ä–µ–º–µ–Ω–∏, —è–≤–ª—è—é—Ç—Å—è –æ–¥–Ω–∏–º–∏ –∏–∑ —Å–∞–º—ã—Ö —Å–∏–ª—å–Ω—ã—Ö –∏ —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç–µ–ª–µ–π –≤–æ –º–Ω–æ–≥–∏—Ö –∑–∞–¥–∞—á–∞—Ö. –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Å–ø—Ä–æ—Å –Ω–∞ —Ç–æ–≤–∞—Ä—ã, —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ ‚Äî –≤—Å—ë —ç—Ç–æ —Å–∏–ª—å–Ω–æ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫, –¥–Ω—è –Ω–µ–¥–µ–ª–∏, –º–µ—Å—è—Ü–∞ –∏–ª–∏ —Å–µ–∑–æ–Ω–∞.

**–¶–µ–ª–∏ —ç—Ç–æ–≥–æ –º–æ–¥—É–ª—è:**

*   **–î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –î–∞—Ç—ã/–í—Ä–µ–º–µ–Ω–∏:** "–†–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å" –æ–¥–Ω—É —Å–ª–æ–∂–Ω—É—é `datetime` –∫–æ–ª–æ–Ω–∫—É –Ω–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø—Ä–æ—Å—Ç—ã—Ö –∏ –ª–µ–≥–∫–æ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ–º—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ (–≥–æ–¥, –º–µ—Å—è—Ü, —á–∞—Å –∏ —Ç.–¥.).
*   **–í—ã—è–≤–ª–µ–Ω–∏–µ –¢—Ä–µ–Ω–¥–æ–≤ –∏ –°–µ–∑–æ–Ω–Ω–æ—Å—Ç–∏:** –°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–∑–Ω–∞–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥—É—Ç –º–æ–¥–µ–ª–∏ —É–ª–æ–≤–∏—Ç—å –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —Ç—Ä–µ–Ω–¥—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ –≥–æ–¥–∞–º) –∏ –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—É—é —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ –º–µ—Å—è—Ü–∞–º –∏–ª–∏ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏).
*   **–í—ã—á–∏—Å–ª–µ–Ω–∏–µ –í—Ä–µ–º–µ–Ω–Ω—ã—Ö –ò–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤:** –†–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –≤–æ–∑—Ä–∞—Å—Ç –∏ –¥—Ä—É–≥–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–∏, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞ —Ä–∞–∑–Ω–∏—Ü–µ –º–µ–∂–¥—É –¥–≤—É–º—è –¥–∞—Ç–∞–º–∏.

## 2. üõ†Ô∏è –î–æ—Å—Ç—É–ø–Ω—ã–µ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –∏ –ö–æ–≥–¥–∞ –∏—Ö –ü—Ä–∏–º–µ–Ω—è—Ç—å

---

### 2.1. `DatetimeFeatureGenerator`

*   **–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –ò–∑–≤–ª–µ–∫–∞–µ—Ç –∏–∑ `datetime` –∫–æ–ª–æ–Ω–∫–∏ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –≤–∞—à–∏–º –∑–∞–ø—Ä–æ—Å–æ–º.

*   **üí° –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
    *   **–í—Å–µ–≥–¥–∞**, –∫–æ–≥–¥–∞ —É –≤–∞—Å –µ—Å—Ç—å –∫–æ–ª–æ–Ω–∫–∞ —Å –¥–∞—Ç–æ–π –∏–ª–∏ –≤—Ä–µ–º–µ–Ω–µ–º. –≠—Ç–æ –±–∞–∑–æ–≤—ã–π –∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —à–∞–≥.
    *   –í—ã –º–æ–∂–µ—Ç–µ –≥–∏–±–∫–æ –≤—ã–±–∏—Ä–∞—Ç—å, –∫–∞–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤–∞–º –Ω—É–∂–Ω—ã, —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞—Ç—å –¥–∞—Ç–∞—Å–µ—Ç –ª–∏—à–Ω–∏–º–∏ –ø—Ä–∏–∑–Ω–∞–∫–∞–º–∏.

*   **‚öôÔ∏è –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ YAML:**
    –í—ã —É–∫–∞–∑—ã–≤–∞–µ—Ç–µ —Å–ø–∏—Å–æ–∫ –∫–æ–ª–æ–Ω–æ–∫ (`cols`) –∏ —Å–ø–∏—Å–æ–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (`components`), –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—Ç–∏—Ç–µ –∏–∑–≤–ª–µ—á—å.

    ```yaml
    - _target_: src.features.datetime.DatetimeFeatureGenerator
      name: "extract_datetime_components"
      cols: ["transaction_timestamp"]
      components:
        - "year"         # –ì–æ–¥ (2023, 2024...) - –¥–ª—è —Ç—Ä–µ–Ω–¥–æ–≤
        - "month"        # –ú–µ—Å—è—Ü (1-12) - –¥–ª—è –≥–æ–¥–æ–≤–æ–π —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç–∏
        - "day"          # –î–µ–Ω—å –º–µ—Å—è—Ü–∞ (1-31)
        - "hour"         # –ß–∞—Å (0-23) - –¥–ª—è —Å—É—Ç–æ—á–Ω–æ–π —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç–∏
        - "weekday"      # –î–µ–Ω—å –Ω–µ–¥–µ–ª–∏ (0=–ü–Ω, 6=–í—Å) - –¥–ª—è –Ω–µ–¥–µ–ª—å–Ω–æ–π —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç–∏
        - "is_weekend"   # –ë–∏–Ω–∞—Ä–Ω—ã–π —Ñ–ª–∞–≥ (1, –µ—Å–ª–∏ –°–± –∏–ª–∏ –í—Å)
        - "dayofyear"    # –î–µ–Ω—å –≥–æ–¥–∞ (1-366)
        - "time_of_day"  # –ö–∞—Ç–µ–≥–æ—Ä–∏—è ('Morning', 'Afternoon', 'Evening', 'Night')
        - "cyclical"     # –°–æ–∑–¥–∞–µ—Ç sin/cos –ø—Ä–∏–∑–Ω–∞–∫–∏ (—Å–º. –Ω–∏–∂–µ)
    ```

#### **–û—Å–æ–±—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç: `'cyclical'`**

*   **–ü—Ä–æ–±–ª–µ–º–∞:** –î–ª—è –º–æ–¥–µ–ª–µ–π (–æ—Å–æ–±–µ–Ω–Ω–æ –ª–∏–Ω–µ–π–Ω—ã—Ö) `–º–µ—Å—è—Ü=12` –∏ `–º–µ—Å—è—Ü=1` ‚Äî —ç—Ç–æ –¥–≤–∞ –æ—á–µ–Ω—å –¥–∞–ª–µ–∫–∏—Ö —á–∏—Å–ª–∞. –ù–æ –º—ã –∑–Ω–∞–µ–º, —á—Ç–æ –¥–µ–∫–∞–±—Ä—å –∏ —è–Ω–≤–∞—Ä—å ‚Äî —Å–æ—Å–µ–¥–∏.
*   **–†–µ—à–µ–Ω–∏–µ:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `'cyclical'` –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ (—á–∞—Å, –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏, –º–µ—Å—è—Ü) –≤ –¥–≤—É–º–µ—Ä–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ —Å –ø–æ–º–æ—â—å—é —Å–∏–Ω—É—Å–∞ –∏ –∫–æ—Å–∏–Ω—É—Å–∞. –ù–∞ —ç—Ç–æ–π 2D-–æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏ `(sin, cos)` –¥–µ–∫–∞–±—Ä—å –∏ —è–Ω–≤–∞—Ä—å –±—É–¥—É—Ç —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã —Ä—è–¥–æ–º.
*   **–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ**, –µ—Å–ª–∏ –≤—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ —Å **–ª–∏–Ω–µ–π–Ω—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏ –∏–ª–∏ –Ω–µ–π—Ä–æ–Ω–Ω—ã–º–∏ —Å–µ—Ç—è–º–∏**. –î—Ä–µ–≤–æ–≤–∏–¥–Ω—ã–µ –º–æ–¥–µ–ª–∏ –º–æ–≥—É—Ç —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è –∏ –±–µ–∑ —ç—Ç–æ–≥–æ, –Ω–æ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ –∏–º –Ω–µ –ø–æ–≤—Ä–µ–¥—è—Ç.

---

### 2.2. `DateDifferenceGenerator`

*   **–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –í—ã—á–∏—Å–ª—è–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—É—é —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É –¥–≤—É–º—è `datetime` –∫–æ–ª–æ–Ω–∫–∞–º–∏.

*   **üí° –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
    *   **–í—ã—á–∏—Å–ª–µ–Ω–∏–µ "–≤–æ–∑—Ä–∞—Å—Ç–∞":** `(–¥–∞—Ç–∞_—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ - –¥–∞—Ç–∞_—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏)` = –≤–æ–∑—Ä–∞—Å—Ç –∞–∫–∫–∞—É–Ω—Ç–∞.
    *   **–í—ã—á–∏—Å–ª–µ–Ω–∏–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:** `(–¥–∞—Ç–∞_–∫–æ–Ω—Ü–∞_—Å–µ—Å—Å–∏–∏ - –¥–∞—Ç–∞_–Ω–∞—á–∞–ª–∞_—Å–µ—Å—Å–∏–∏)` = –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–µ—Å—Å–∏–∏.
    *   **–í—Ä–µ–º—è –¥–æ/–ø–æ—Å–ª–µ —Å–æ–±—ã—Ç–∏—è:** `(–¥–∞—Ç–∞_–¥–æ—Å—Ç–∞–≤–∫–∏ - –¥–∞—Ç–∞_–∑–∞–∫–∞–∑–∞)` = –≤—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏.

*   **‚öôÔ∏è –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ YAML:**
    –í—ã —É–∫–∞–∑—ã–≤–∞–µ—Ç–µ –¥–≤–µ –∫–æ–ª–æ–Ω–∫–∏ (`col1` - –±–æ–ª–µ–µ –ø–æ–∑–¥–Ω—è—è, `col2` - –±–æ–ª–µ–µ —Ä–∞–Ω–Ω—è—è) –∏ –µ–¥–∏–Ω–∏—Ü—É –∏–∑–º–µ—Ä–µ–Ω–∏—è (`unit`).

    ```yaml

    - _target_: src.features.datetime.DateDifferenceGenerator
      name: "calculate_account_age_at_transaction"
      col1: "transaction_timestamp"
      col2: "user_registration_date"
      unit: "D" # 'D' - –¥–Ω–∏, 'h' - —á–∞—Å—ã, 'm' - –º–∏–Ω—É—Ç—ã, 's' - —Å–µ–∫—É–Ω–¥—ã
    ```

## 3. üß† –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏ —Å–æ–≤–µ—Ç—ã –ø–æ Pipeline

1.  **–ü–æ—Ä—è–¥–æ–∫ –æ–ø–µ—Ä–∞—Ü–∏–π:** –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –∏–∑ —ç—Ç–æ–≥–æ –º–æ–¥—É–ª—è –æ–±—ã—á–Ω–æ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è **–Ω–∞ —Ä–∞–Ω–Ω–∏—Ö —ç—Ç–∞–ø–∞—Ö** –∫–æ–Ω–≤–µ–π–µ—Ä–∞, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ —Å–æ–∑–¥–∞—é—Ç –±–∞–∑–æ–≤—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞—Ç–µ–º –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –¥—Ä—É–≥–∏—Ö –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ `AggregationGenerator` –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –ø–æ –º–µ—Å—è—Ü–∞–º).
2.  **–û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤:**
    *   `time_of_day` ‚Äî —ç—Ç–æ –Ω–æ–≤—ã–π **–∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã–π** –ø—Ä–∏–∑–Ω–∞–∫. –ö –Ω–µ–º—É –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å `OneHotEncoder`, `TargetEncoder` –∏ —Ç.–¥.
    *   `year`, `month`, `hour` –∏ –¥—Ä—É–≥–∏–µ ‚Äî —ç—Ç–æ –Ω–æ–≤—ã–µ **—á–∏—Å–ª–æ–≤—ã–µ** (–∏–ª–∏, —Ç–æ—á–Ω–µ–µ, –æ—Ä–¥–∏–Ω–∞–ª—å–Ω—ã–µ) –ø—Ä–∏–∑–Ω–∞–∫–∏. –î–ª—è –¥—Ä–µ–≤–æ–≤–∏–¥–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π –∏—Ö –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ –µ—Å—Ç—å. –î–ª—è –ª–∏–Ω–µ–π–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π `month` –∏ `hour` –ª—É—á—à–µ –≤—Å–µ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—Ç—å —á–µ—Ä–µ–∑ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ `sin/cos` –ø—Ä–∏–∑–Ω–∞–∫–∏.
3.  **–ß–∞—Å–æ–≤—ã–µ –ø–æ—è—Å–∞:** –ë—É–¥—å—Ç–µ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã, –µ—Å–ª–∏ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —á–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–∞—Ö. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –¥–∞—Ç—ã –ø—Ä–∏–≤–µ–¥–µ–Ω—ã –∫ –µ–¥–∏–Ω–æ–º—É —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, UTC) –ø–µ—Ä–µ–¥ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ–º —Ä–∞–∑–Ω–∏—Ü.
4.  **–ê–≥—Ä–µ–≥–∏—Ä—É–π—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏:** –ü–æ—Å–ª–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, `hour`, –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å –º–æ—â–Ω—ã–µ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏, —Ç–∞–∫–∏–µ –∫–∞–∫ `user_id_mean_hour_of_purchase`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∫–∞–∂–µ—Ç, –≤ –∫–∞–∫–æ–µ –≤—Ä–µ–º—è —Å—É—Ç–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–±—ã—á–Ω–æ —Å–æ–≤–µ—Ä—à–∞–µ—Ç –ø–æ–∫—É–ø–∫–∏.